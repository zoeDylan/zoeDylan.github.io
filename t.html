
    function escape2Html(str) {
        var arrEntities = {
            'lt': '<',
            'gt': '>',
            'nbsp': ' ',
            'amp': '&',
            'quot': '"'
        };
        return str.replace(/&(lt|gt|nbsp|amp|quot);/ig, function(all, t) {
            return arrEntities[t];
        });
    }
    $('pre.highlight.html').each((i, elem) => {
        const
            fe = $(elem),
            codeElem = fe.children('code');
        if (fe.children('button').length <= 0) {
            //添加可编辑功能、取消波浪线
            codeElem.attr({
                'contenteditable': 'true',
                'spellcheck': 'false'
            });
            //添加运行按钮
            fe.append('<span class="text-muted">//*点击代码部分可以编辑</span><button class="btn btn-info">运行</button>');
            fe.children('button').click(function() {
                let
                    btn = $(this),
                    codeType = btn.parent().children('code').attr('class'),
                    code = btn.parent().children('code').html().replace(/<[a-z]+ +[a-z]+="[a-z]+">|<\/[a-z]+>/g, '');
                let win = window.open('');
                win.document.write(escape2Html(code));
            });
        }
    });